**Сбор и разметка данных**  
  Для тренировки модели по подсчету количества бластоспор на фотографиях первым этапом был сбор и разметка данных. При проведении исследований все подсчеты количества бластоспор выполнялись на оборудовании без фотографирования, таким образом, изначально не было даже набора фотографий для разметки и решения задачи. В этом и заключалась основная сложность для выбора данной задачи в качестве финального проекта (Не было понимания количества времени, необходимого для сбора и разметки фотографий). В соответствии с описанием, приведенным в инструкции для модели **YOLOv5** (*https://github.com/ultralytics/yolov5/wiki/Tips-for-Best-Training-Results*) для получения наилучших результатов тренировки модели YOLOv5 рекомендуется использовать не менее 1500 изображений с количеством размеченных объектов не менее 10000.  
  
  При выборе задачи оценивалось время, необходимое на фотографирование и разметку. Специфика и конструкция устройства забора проб для подсчета количества бластоспор позволяет получить до 50 различных фотографий за один забор. В исследованиях параллельно работают 2 биореактора. С учетом наличия у научных сотрудников текущих задач, в день было возможно провести 2 забора проб из каждого биореактора и сделать 200 фотографий. За 3 дня было получено 500 различных фотографий, что уже достаточно для создания прототипа модели и основы работающего сервиса при наличии разметки фотографий.  
  
  Для выполнения разметки фотографий разработаны и выложены на github различные приложения. В своей задаче я использовал библиотеку **label-studio** (*https://github.com/heartexlabs/label-studio*). Для оценки времени, необходимого для разметки фотографий, мной была проведена разметка 10 фотографий с помощью label-studio: затраченное время для 10 фотографий составило около 1 ч 10 мин (в среднем разметка одной фотографии заняла около 7 мин). Также необходимо учесть, что после разметки 30 фотографий, скорость разметки сильно падает (практика показала, что на 30 фотографий уходило около 4 часов с учетом небольших перерывов, в выходной день меня хватало на разметку 50 фотографий). Таким образом, для разметки 500 фотографий мне бы потребовалось около 10 дней без учета наличия иных задач, помимо финального проекта, что довольно много. В связи с этим было решено распараллелить работу между еще двумя людьми и освободить время на работу с моделью для обучения. Такие люди были найдены, но, чтобы они проводили разметку необходимо было установить label-studio к ним на компьютеры, работающие на Windows и объяснить, как производится разметка.  
  *Небольшое отступление*: когда регулярно работаешь и устанавливаешь приложения с github, то установка label-studio не представляет каких-либо затруднений. У меня на компьютере стоит вторая операционная система **Linux Ubuntu**, установка и запуск label-studio на Linux также не вызвала затруднений (состоит из трех строк): To install Label Studio with pip and a virtual environment, you need Python version 3.7 or later. Run the following: *python3 -m venv env* далее *source env/bin/activate* и далее *python -m pip install label-studio*.  
  Для установки **label-studio** на **Windоws** пришлось почитать интернет и уточнить пару моментов у ментора, далее - краткая инструкция для установки label-studio на Windows:
  1. Скачиваем python c официального сайта (*https://www.python.org*) и устанавливаем (запуск exe-файла). При установке нужно поставить галочку в флажок «Добавить Python 3.x в PATH» или позже вручную добавить путь к python.exe и папке Scripts в PATH Windows (Запуск python, запуск виртуальных сред или команд pip install через Терминал Windows возможен в случае, если python добавлен в переменную среды Windows PATH). Инструкции по добавлению пути к python.exe и папке Scripts в PATH Windows можно без труда найти соответствующим запросом в интернете. Для проверки установки - запускаем терминал Windows и пишем команду *python --version*. Если будет возращена установленная версия python, то можно переходить к следующему шагу.  
  2.  Создаем новое виртуальное окружение (среду) с именем "env" (имя можно выбрать любое), для этого в командной строке вводим: *python -m venv env*  
  3.  Переходим в папку с созданным виртуальным окружением командой: *cd env*  
  4.  Активируем виртуальное окружение командой: *.\Scripts\activate* (после выполнения команды в терминале отобразится: (env) C:\Users\user_name\env>)  
  5.  Устанавливаем библиотеку label-studio командой: *python -m pip install label-studio*  
  6.  Запуск программы осуществляем командой: *label-studio*  (программа запускается на локальном сервере в http://localhost:8080)  
  7.  После окончания работы в label-studio деактивация/выход из виртуального окружения осуществляется командой: *deactivate*  
  В дальнейшем для запуска программы при открытии терминала повторяем шаги 3,4,6.
  Интерфейс программы для настройки проекта интуитивно понятен: логинимся (создаем локальный профиль) -> выбираем создать проект + вводим название -> выбираем тип разметки под решаемую задачу (Object Detection with Bounding Boxes) и вводим названия объектов для разметки (в моем случае использовал краткое название: micro_orgs). Фотографии можно импортировать, как при создании проекта, так и после его создания. При проведении разметки рекомендую в настройках поставить галочку "Keep label selected after creating a region", чтобы не включать каждый раз инструмент разметки. Разметка осуществляется просто и быстро: создание прямоугольной области bounding box осуществляется нажатием и последующим отпусканием левой кнопки мыши, так, чтобы размечаемый объект попал в выделенную область.  
  После установки label-studio еще на двух компьютерах, настройки проекта и объяснения особенностей работы программы, разметка 500 фотографий была выполнена в течении 1 недели (разметка 210 + 90 фотографий за 5 дней была осуществлена мной и еще одним человеком, еще 200 фотографий разметил научный сотрудник лаборатории в рабочее время за 4 дня).  Общее затраченное время на разметку 500 фотографий составило 7-8 дней при наличии у меня иных задач, не связанных с проектом и с учетом работы над моделью проекта.  
  Дальнейшая разметка 900-1000 фотографий для улучшения качества работы модели проводилась с помощью библиотеки **clever_labeling** (*https://github.com/denred0/clever_labeling*) на основе ручной разметки первых 500 фотографий.  
  
  Описание работы clever_labeling...
  
  
  
